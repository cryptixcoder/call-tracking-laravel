<!DOCTYPE html><html><head><title>Call Tracking</title><style>body, html {
  height:100%;
  width:100%;
  padding:0;
  margin:0;
  overflow:hidden;
  background-color:#ddd;
}
.wrapper {
  height:100%;
  width:100%;
}</style><link rel="shortcut icon" href="//twilio.com/bundles/marketing/img/favicons/favicon.ico"><link rel="apple-touch-icon" href="//twilio.com/bundles/marketing/img/favicons/favicon_57.png"><link rel="apple-touch-icon" sizes="72x72" href="//twilio.com/bundles/marketing/img/favicons/favicon_72.png"><link rel="apple-touch-icon" sizes="114x114" href="//twilio.com/bundles/marketing/img/favicons/favicon_114.png"><link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css"><link rel="stylesheet" href="viewsaurus.css"></head><body><div class="wrapper"><div id="viewsaurus" data-title="Call Tracking"><div class="saurus-panes"><div class="saurus-prose"><div class="saurus-prose-header"><div class="title-outer"><span class="step-title">Call Tracking</span></div></div><div class="saurus-nav-buttons"><div class="saurus-nav-button nav-overview"><div class="saurus-nav-button-inner"><i class="fa fa-fw fa-list"></i></div><div class="nav-divider"></div></div><div class="saurus-nav-button nav-previous"><div class="saurus-nav-button-inner"><a href=""> <i class="fa fa-fw fa-play fa-rotate-180"></i></a></div><div class="nav-divider"></div></div><div class="saurus-nav-button nav-next clickable"><div class="saurus-nav-button-inner"><a href="#1"> <i class="fa fa-fw fa-play"></i></a></div></div><div class="saurus-next-title"><span class="next-title-inner"></span></div></div><div class="saurus-progress-bar"></div><div class="saurus-start"><p>Use Twilio to track the effectiveness of your marketing campaigns. Let's get started!</p><a href="#0">Start Tutorial</a></div><div class="saurus-content"><div data-title="Call Tracking with Twilio and Laravel" class="chapter"><div data-file="app/Providers/TwilioAppServiceProvider.php" class="step"><h2 id="what-does-this-thing-do-">What does this thing do?</h2>
<p>This <a href="http://laravel.com/">Laravel</a> web application shows
how you can use Twilio to track the effectiveness of different
marketing channels.</p>
<p>This application has three main features:</p>
<ul>
<li>It purchases phone numbers from Twilio to use in different marketing
campaigns (like a billboard or a bus advertisement)</li>
<li>It forwards incoming calls for those phone numbers to a salesperson</li>
<li>It displays charts showing data about the phone numbers and the calls
they receive</li>
</ul>
<p>In this tutorial, we&#39;ll point out the key bits of code that make
this application work.  <a href="https://github.com/twiliodeved/call-tracking-laravel">Check out the project README on
GitHub</a> to
see how to run the code yourself.</p>
<p>Let&#39;s get started! Click the right arrow above to advance to the next
code snippet.</p>
<hr>
<p><strong>See also:</strong></p>
<ul>
<li><a href="https://github.com/twilio/twilio-php/">Twilio PHP Helper Library</a></li>
<li><a href="https://www.twilio.com/docs/api">Twilio REST API docs</a></li>
<li><a href="http://laravel.com/docs/5.1">Laravel documentation</a></li>
<li><a href="http://www.searchenginejournal.com/seo-beginner-guide-call-tracking-care/83173/">What is Call Tracking?</a></li>
</ul>
</div><div data-file="app/Http/Controllers/AvailableNumberController.php" data-highlight="18-36" class="step"><h2 id="search-for-available-phone-numbers">Search for available phone numbers</h2>
<p>Call tracking requires us to search for and buy phone numbers on
demand, associating a specific phone number with a lead
source. We make a server-side request (possibly with a filter
area code) asking Twilio for available phone numbers.</p>
<hr>
<p><strong>See also:</strong></p>
<ul>
<li><a href="https://twilio-php.readthedocs.org/en/latest">twilio-php helper</a></li>
<li><a href="https://twilio-php.readthedocs.org/en/latest/usage/rest/phonenumbers.html#searching-for-a-number">Searching for numbers in twilio-php</a></li>
<li><a href="https://twilio-php.readthedocs.org/en/latest/usage/rest/phonenumbers.html#buying-a-number">Buying numbers in twilio-php</a></li>
<li><a href="https://www.twilio.com/docs/api/rest/available-phone-numbers">REST API: Available Phone Numbers</a></li>
</ul>
</div><div data-file="resources/views/available_numbers/index.blade.php" class="step"><h2 id="display-available-phone-numbers">Display available phone numbers</h2>
<p>We display a form to the user on the app&#39;s home page which
allows them to search for a new phone number by area code. We
make a request (possibly with a filter area code) through the
application&#39;s backend asking Twilio for available phone
numbers. We also define a form that can be used to buy a
specific number</p>
<hr>
<p><strong>See also:</strong></p>
<ul>
<li><a href="http://laravel.com/docs/5.1/blade">The Blade templating engine</a></li>
<li><a href="http://laravelcollective.com/docs/5.1/html">Laravel Collective: Forms &amp; Html</a></li>
</ul>
</div><div data-file="app/Http/Controllers/LeadSourceController.php" data-highlight="20-35" class="step"><h2 id="buy-a-phone-number">Buy a phone number</h2>
<p>The <code>store</code> endpoint for the LeadSource resource expects a phone
number as a parameter and purchases a number through Twilio&#39;s
API on behalf of this application&#39;s user. It enables the caller
ID feature and associates the number to the current TwiML app
SID. It immediately redirects the user so she can add a
forwarding number and a description for the lead source.</p>
<p>Next, we&#39;ll how this is done.</p>
<hr>
<p><strong>See also:</strong></p>
<ul>
<li><a href="https://twilio-php.readthedocs.org/en/latest/usage/rest/phonenumbers.html#buying-a-number">Buying numbers in twilio-php</a></li>
<li><a href="https://www.twilio.com/docs/api/rest/available-phone-numbers">Twilio REST API: Available Phone Numbers</a></li>
</ul>
</div><div data-file="app/Http/Controllers/LeadSourceController.php" data-highlight="60-74" class="step"><h2 id="associate-a-phone-number-with-a-lead-source">Associate a phone number with a lead source</h2>
<p>Once we have bought a number we display a form so the user can
add a forwarding number and a description for this number. From
now on, any call to this number will be attributed to this
source. All phone numbers should be in E.164 format.</p>
<hr>
<p><strong>See also:</strong></p>
<ul>
<li><a href="http://laravelcollective.com/docs/5.1/html#opening-a-form">Laravel Collective Forms</a></li>
<li><a href="http://laravel.com/docs/5.1/responses#redirects">Laravel redirects</a></li>
<li><a href="https://en.wikipedia.org/wiki/E.164">E.164 format</a></li>
</ul>
</div><div data-file="app/LeadSource.php" class="step"><h2 id="the-leadsource-model">The LeadSource model</h2>
<p>This is the model that contains the information provided in the
form from the previous step. The <code>LeadSource</code> model associates a
Twilio number to a named lead source (like &quot;Wall Street Journal
Ad&quot; or &quot;Dancing guy with sign&quot;). It also tracks a phone number
to which we&#39;d like all the calls redirected, like your sales or
support help line.  It also provides a convenience method to
find leads associated to this lead source</p>
<hr>
<p><strong>See also:</strong></p>
<ul>
<li><a href="http://laravel.com/docs/5.1/eloquent">Eloquent models</a></li>
<li><a href="http://laravel.com/api/5.1/Illuminate/Database/Eloquent/Model.html#method_hasMany">Eloquent hasMany</a></li>
</ul>
</div><div data-file="app/Lead.php" data-highlight="9-16" class="step"><h2 id="the-lead-model">The Lead model</h2>
<p>A <code>Lead</code> represents a phone call generated by a
<code>LeadSource</code>. Each time somebody calls a phone number associated
with a <code>LeadSource</code>, we&#39;ll use the <code>Lead</code> model to record some
of the <a href="https://www.twilio.com/docs/api/twiml/twilio_request">data Twilio gives
us</a> about
their call.</p>
<hr>
<p><strong>See also:</strong></p>
<ul>
<li><a href="http://laravel.com/api/5.1/Illuminate/Database/Eloquent/Model.html#method_belongsTo">Eloquent belongsTo</a></li>
</ul>
</div><div data-file="app/Http/Controllers/LeadController.php" data-highlight="36-56" class="step"><h2 id="forward-calls-and-create-leads">Forward calls and create leads</h2>
<p>Whenever a customer calls one of our Twilio numbers, Twilio will
send a POST request to the URL associated with this view
function (should be <code>/lead</code>).</p>
<p>We use the incoming call data to create a new <code>Lead</code> for a
<code>LeadSource</code>, then return
<a href="https://www.twilio.com/docs/api/twiml">TwiML</a> that connects our
caller with the <code>forwarding_number</code> of our <code>LeadSource</code>.</p>
<hr>
<p><strong>See also:</strong></p>
<ul>
<li><a href="https://www.twilio.com/docs/api/twiml/twilio_request">Twilio voice request parameters</a></li>
<li><a href="http://laravel.com/docs/5.1/routing#csrf-excluding-uris">Excluding URIs from CSRF protection</a></li>
<li><a href="https://twilio-php.readthedocs.org/en/latest/usage/twiml.html">TwiML creation with twilio-php</a></li>
<li><a href="https://www.twilio.com/docs/api/twiml/dial">TwiML &lt;Dial&gt; verb</a></li>
</ul>
</div><div data-file="app/Lead.php" data-highlight="18-50" class="step"><h2 id="get-statistics-about-our-lead-sources">Get statistics about our lead sources</h2>
<p>One useful statistic we can get from our data is how many calls
each <code>LeadSource</code> has received. We might also want to know the
cities the leads are coming from. For this we define two</p>
<h2 id="eloquent-queries-">Eloquent queries.</h2>
<p><strong>See also:</strong></p>
<ul>
<li><a href="http://laravel.com/docs/5.1/eloquent-relationships#querying-relations">Eloquent: Querying Relations</a></li>
</ul>
</div><div data-file="public/js/pieCharts.js" class="step"><h2 id="visualize-our-statistics-with-chart-js">Visualize our statistics with Chart.js</h2>
<p>Back on the home page, we fetch call tracking statistics <a href="http://laravel.com/docs/5.1/responses#json-responses">in
JSON from the
server</a>
using <a href="https://api.jquery.com/jquery.get/">jQuery</a>.  We display
the stats in colorful pie charts we create with
<a href="http://www.chartjs.org/">Chart.js</a>.</p>
</div><div data-file="app/Http/Controllers/LeadController.php" data-highlight="37-56" class="step"><h2 id="where-to-next-">Where to next?</h2>
<p>That&#39;s it! Our Laravel application is now ready to purchase new phone
numbers, forward incoming calls, and record some statistics for our
business. </p>
<p>If you&#39;re a PHP developer working with Twilio, you might also enjoy these
tutorials:</p>
<p><a href="https://www.twilio.com/docs/howto/walkthrough/click-to-call/php/laravel"><strong>Click-To-Call (Laravel)</strong></a></p>
<p>Put a button on your web page that connects visitors to live support or sales people via telephone.</p>
<p><a href="https://www.twilio.com/docs/howto/walkthrough/appointment-reminders/php/laravel"><strong>Appointment Reminders (Laravel)</strong></a></p>
<p>Send your customers automatic reminders ahead of appoiments using Twilio
SMS.</p>
<p>Thanks for checking out this tutorial! If you have any feedback to share
with us, we&#39;d love to hear it. Tweet <a href="https://twitter.com/twilio">@twilio</a>
to let us know what you think.</p>
</div></div>
<div class="saurus-files" style="display:none;"><textarea class="saurus-file" data-file="app/Providers/TwilioAppServiceProvider.php" data-mode="php">PD9waHAKCm5hbWVzcGFjZSBBcHBcUHJvdmlkZXJzOwoKdXNlIElsbHVtaW5hdGVcU3VwcG9ydFxTZXJ2aWNlUHJvdmlkZXI7CgpjbGFzcyBUd2lsaW9BcHBTZXJ2aWNlUHJvdmlkZXIgZXh0ZW5kcyBTZXJ2aWNlUHJvdmlkZXIKewogICAgLyoqCiAgICAgKiBJbml0aWFsaXplcyBhbmQgcmVnaXN0ZXJzIFR3aWxpbyBTREsncyBvYmplY3QuCiAgICAgKgogICAgICogQHJldHVybiB2b2lkCiAgICAgKi8KICAgIHB1YmxpYyBmdW5jdGlvbiByZWdpc3RlcigpCiAgICB7CiAgICAgICAgJHRva2VuID0gY29uZmlnKCdhcHAudHdpbGlvJylbJ1RXSUxJT19BVVRIX1RPS0VOJ107CiAgICAgICAgJGFjY291bnRTaWQgPSBjb25maWcoJ2FwcC50d2lsaW8nKVsnVFdJTElPX0FDQ09VTlRfU0lEJ107CgogICAgICAgICR0d2lsaW8gPSBuZXcgXFNlcnZpY2VzX1R3aWxpbygkYWNjb3VudFNpZCwgJHRva2VuKTsKICAgICAgICAkdGhpcy0+YXBwLT5pbnN0YW5jZSgnVHdpbGlvJywgJHR3aWxpbyk7CiAgICB9Cn0=</textarea>
<textarea class="saurus-file" data-file="app/Http/Controllers/AvailableNumberController.php" data-mode="php">PD9waHAKCm5hbWVzcGFjZSBBcHBcSHR0cFxDb250cm9sbGVyczsKCnVzZSBJbGx1bWluYXRlXEh0dHBcUmVxdWVzdDsKCnVzZSBBcHBcSHR0cFxSZXF1ZXN0czsKdXNlIEFwcFxIdHRwXENvbnRyb2xsZXJzXENvbnRyb2xsZXI7CgpjbGFzcyBBdmFpbGFibGVOdW1iZXJDb250cm9sbGVyIGV4dGVuZHMgQ29udHJvbGxlcgp7CiAgICAvKioKICAgICAqIERpc3BsYXkgbnVtYmVycyBhdmFpbGFibGUgZm9yIHB1cmNoYXNlLiBGZXRjaGVkIGZyb20gdGhlIEFQSQogICAgICoKICAgICAqIEBwYXJhbSAgUmVxdWVzdCAkcmVxdWVzdAogICAgICogQHJldHVybiBSZXNwb25zZQogICAgICovCiAgICBwdWJsaWMgZnVuY3Rpb24gaW5kZXgoUmVxdWVzdCAkcmVxdWVzdCkKICAgIHsKICAgICAgICAkdHdpbGlvID0gXEFwcDo6bWFrZSgnVHdpbGlvJyk7CgogICAgICAgICRhcmVhQ29kZSA9ICRyZXF1ZXN0LT5pbnB1dCgnYXJlYUNvZGUnKTsKCiAgICAgICAgJG51bWJlcnMgPSAkdHdpbGlvCiAgICAgICAgICAgIC0+YWNjb3VudAogICAgICAgICAgICAtPmF2YWlsYWJsZV9waG9uZV9udW1iZXJzCiAgICAgICAgICAgIC0+Z2V0TGlzdCgnVVMnLCAnTG9jYWwnLCBbJ0FyZWFDb2RlJyA9PiAkYXJlYUNvZGVdKQogICAgICAgICAgICAtPmF2YWlsYWJsZV9waG9uZV9udW1iZXJzOwoKICAgICAgICByZXR1cm4gcmVzcG9uc2UoKS0+dmlldygKICAgICAgICAgICAgJ2F2YWlsYWJsZV9udW1iZXJzLmluZGV4JywKICAgICAgICAgICAgWydudW1iZXJzJyA9PiAkbnVtYmVycywKICAgICAgICAgICAgICdhcmVhQ29kZScgPT4gJGFyZWFDb2RlXQogICAgICAgICk7CiAgICB9Cn0K</textarea>
<textarea class="saurus-file" data-file="resources/views/available_numbers/index.blade.php" data-mode="php">QGV4dGVuZHMoJ2xheW91dHMubWFzdGVyJykKCkBzZWN0aW9uKCdjb250ZW50JykKPGRpdiBjbGFzcz0iY29sLWxnLTYiPgo8aDI+UHVyY2hhc2UgcGhvbmUgbnVtYmVyczwvaDI+CiAgICA8aDM+QXZhaWxhYmxlIG51bWJlcnM8L2gzPgogICAgPHA+Rm9yIGFyZWEgY29kZToge3sgJGFyZWFDb2RlIG9yICdhbnknIH19PC9wPgogICAgPHA+VGhlIG51bWJlciB5b3UgY2hvb3NlIHdpbGwgYmUgdXNlZCB0byBjcmVhdGUgYSBMZWFkIFNvdXJjZS4gT24gdGhlIG5leHQgcGFnZSwgeW91IHdpbGwgc2V0IGEgbmFtZSBhbmQgZm9yd2FyZGluZyBudW1iZXIgZm9yIHRoaXMgbGVhZCBzb3VyY2UuPC9wPgogICAgPHRhYmxlIGNsYXNzPSJ0YWJsZSI+CiAgICAgICAgPHRoZWFkPgogICAgICAgICAgICA8dGg+UGhvbmUgbnVtYmVyPC90aD4KICAgICAgICAgICAgPHRoPlN0YXRlPC90aD4KICAgICAgICAgICAgPHRoPjwvdGg+CiAgICAgICAgPC90aGVhZD4KICAgICAgICA8dGJvZHk+CiAgICAgICAgICAgIEBmb3JlYWNoICgkbnVtYmVycyBhcyAkbnVtYmVyKQogICAgICAgICAgICAgICAgPHRyPgogICAgICAgICAgICAgICAgICAgIDx0ZD4ge3sgJG51bWJlci0+ZnJpZW5kbHlfbmFtZSB9fSA8L3RkPgogICAgICAgICAgICAgICAgICAgIDx0ZD4ge3sgJG51bWJlci0+cmVnaW9uIH19IDwvdGQ+CiAgICAgICAgICAgICAgICAgICAgPHRkPgogICAgICAgICAgICAgICAgICAgICAgICB7ISEgRm9ybTo6b3BlbihbJ3VybCcgPT4gcm91dGUoJ2xlYWRfc291cmNlLnN0b3JlJyldKSAhIX0KICAgICAgICAgICAgICAgICAgICAgICAgeyEhIEZvcm06OmhpZGRlbigncGhvbmVOdW1iZXInLCAkbnVtYmVyLT5waG9uZV9udW1iZXIpICEhfQogICAgICAgICAgICAgICAgICAgICAgICB7ISEgRm9ybTo6c3VibWl0KCdQdXJjaGFzZScsIFsnY2xhc3MnID0+ICdidG4gYnRuLXByaW1hcnkgYnRuLXhzJ10pICEhfQogICAgICAgICAgICAgICAgICAgICAgICB7ISEgRm9ybTo6Y2xvc2UoKSAhIX0KICAgICAgICAgICAgICAgICAgICA8L3RkPgogICAgICAgICAgICAgICAgPC90cj4KICAgICAgICAgICAgQGVuZGZvcmVhY2gKICAgICAgICA8L3Rib2R5PgogICAgPC90YWJsZT4KPC9kaXY+CkBzdG9w</textarea>
<textarea class="saurus-file" data-file="app/Http/Controllers/LeadSourceController.php" data-mode="php">PD9waHAKCm5hbWVzcGFjZSBBcHBcSHR0cFxDb250cm9sbGVyczsKCnVzZSBJbGx1bWluYXRlXEh0dHBcUmVxdWVzdDsKCnVzZSBBcHBcSHR0cFxSZXF1ZXN0czsKdXNlIEFwcFxIdHRwXENvbnRyb2xsZXJzXENvbnRyb2xsZXI7CnVzZSBBcHBcTGVhZFNvdXJjZTsKCmNsYXNzIExlYWRTb3VyY2VDb250cm9sbGVyIGV4dGVuZHMgQ29udHJvbGxlcgp7CiAgICAvKioKICAgICAqIFN0b3JlIGEgbmV3IGxlYWQgc291cmNlIChpLmUgcGhvbmUgbnVtYmVyKSBhbmQgcmVkaXJlY3QgdG8gZWRpdAogICAgICogcGFnZQogICAgICoKICAgICAqIEBwYXJhbSAgUmVxdWVzdCAgJHJlcXVlc3QKICAgICAqIEByZXR1cm4gUmVzcG9uc2UKICAgICAqLwogICAgcHVibGljIGZ1bmN0aW9uIHN0b3JlKFJlcXVlc3QgJHJlcXVlc3QpCiAgICB7CiAgICAgICAgJHR3aWxpbyA9IFxBcHA6Om1ha2UoJ1R3aWxpbycpOwogICAgICAgICRhcHBTaWQgPSAkdGhpcy0+X2FwcFNpZCgpOwoKICAgICAgICAkdHdpbGlvLT5hY2NvdW50LT5pbmNvbWluZ19waG9uZV9udW1iZXJzLT5jcmVhdGUoCiAgICAgICAgICAgIFsnUGhvbmVOdW1iZXInID0+ICRyZXF1ZXN0LT5pbnB1dCgncGhvbmVOdW1iZXInKSwKICAgICAgICAgICAgICdWb2ljZUNhbGxlcklkTG9va3VwJyA9PiB0cnVlLAogICAgICAgICAgICAgJ1ZvaWNlQXBwbGljYXRpb25TaWQnID0+ICRhcHBTaWRdCiAgICAgICAgKTsKCiAgICAgICAgJGxlYWRTb3VyY2UgPSBuZXcgTGVhZFNvdXJjZShbJ251bWJlcicgPT4gJHJlcXVlc3QtPmlucHV0KCdwaG9uZU51bWJlcicpXSk7CiAgICAgICAgJGxlYWRTb3VyY2UtPnNhdmUoKTsKCiAgICAgICAgcmV0dXJuIHJlZGlyZWN0KCktPnJvdXRlKCdsZWFkX3NvdXJjZS5lZGl0JywgWyRsZWFkU291cmNlXSk7CiAgICB9CgogICAgLyoqCiAgICAgKiBTaG93IHRoZSBmb3JtIGZvciBlZGl0aW5nIGEgbGVhZCBzb3VyY2UKICAgICAqCiAgICAgKiBAcGFyYW0gIGludCAgJGlkCiAgICAgKiBAcmV0dXJuIFJlc3BvbnNlCiAgICAgKi8KICAgIHB1YmxpYyBmdW5jdGlvbiBlZGl0KCRpZCkKICAgIHsKICAgICAgICAkbGVhZFNvdXJjZVRvRWRpdCA9IExlYWRTb3VyY2U6OmZpbmQoJGlkKTsKCiAgICAgICAgcmV0dXJuIHJlc3BvbnNlKCktPnZpZXcoCiAgICAgICAgICAgICdsZWFkX3NvdXJjZXMuZWRpdCcsCiAgICAgICAgICAgIFsnbGVhZFNvdXJjZScgPT4gJGxlYWRTb3VyY2VUb0VkaXRdCiAgICAgICAgKTsKICAgIH0KCiAgICAvKioKICAgICAqIFVwZGF0ZSB0aGUgbGVhZCBzb3VyY2UgaW4gc3RvcmFnZS4KICAgICAqCiAgICAgKiBAcGFyYW0gIFJlcXVlc3QgICRyZXF1ZXN0CiAgICAgKiBAcGFyYW0gIGludCAgJGlkCiAgICAgKiBAcmV0dXJuIFJlc3BvbnNlCiAgICAgKi8KICAgIHB1YmxpYyBmdW5jdGlvbiB1cGRhdGUoUmVxdWVzdCAkcmVxdWVzdCwgJGlkKQogICAgewogICAgICAgICR0aGlzLT52YWxpZGF0ZSgKICAgICAgICAgICAgJHJlcXVlc3QsIFsKICAgICAgICAgICAgICAgICdmb3J3YXJkaW5nX251bWJlcicgPT4gJ3JlcXVpcmVkJywKICAgICAgICAgICAgICAgICdkZXNjcmlwdGlvbicgPT4gJ3JlcXVpcmVkJwogICAgICAgICAgICBdCiAgICAgICAgKTsKCiAgICAgICAgJGxlYWRTb3VyY2VUb1VwZGF0ZSA9IExlYWRTb3VyY2U6OmZpbmQoJGlkKTsKICAgICAgICAkbGVhZFNvdXJjZVRvVXBkYXRlLT5maWxsKCRyZXF1ZXN0LT5hbGwoKSk7CiAgICAgICAgJGxlYWRTb3VyY2VUb1VwZGF0ZS0+c2F2ZSgpOwoKICAgICAgICByZXR1cm4gcmVkaXJlY3QoKS0+cm91dGUoJ2Rhc2hib2FyZCcpOwogICAgfQoKICAgIC8qKgogICAgICogUmVtb3ZlIHRoZSBsZWFkIHNvdXJjZSBmcm9tIHN0b3JhZ2UgYW5kIHJlbGVhc2UgdGhlIG51bWJlcgogICAgICoKICAgICAqIEBwYXJhbSAgaW50ICAkaWQKICAgICAqIEByZXR1cm4gUmVzcG9uc2UKICAgICAqLwogICAgcHVibGljIGZ1bmN0aW9uIGRlc3Ryb3koJGlkKQogICAgewogICAgICAgICR0d2lsaW8gPSBcQXBwOjptYWtlKCdUd2lsaW8nKTsKICAgICAgICAkbGVhZFNvdXJjZVRvRGVsZXRlID0gTGVhZFNvdXJjZTo6ZmluZCgkaWQpOwogICAgICAgICRudW1iZXIgPSAkdHdpbGlvCiAgICAgICAgICAgIC0+YWNjb3VudAogICAgICAgICAgICAtPmluY29taW5nX3Bob25lX251bWJlcnMKICAgICAgICAgICAgLT5nZXROdW1iZXIoJGxlYWRTb3VyY2VUb0RlbGV0ZS0+bnVtYmVyKTsKCiAgICAgICAgJHR3aWxpby0+YWNjb3VudC0+aW5jb21pbmdfcGhvbmVfbnVtYmVycy0+ZGVsZXRlKCRudW1iZXItPnNpZCk7CiAgICAgICAgJGxlYWRTb3VyY2VUb0RlbGV0ZS0+ZGVsZXRlKCk7CgogICAgICAgIHJldHVybiByZWRpcmVjdCgpLT5yb3V0ZSgnZGFzaGJvYXJkJyk7CiAgICB9CgogICAgLyoqCiAgICAgKiBUaGUgVHdpbGlvIFR3aU1MIEFwcCBTSUQgdG8gdXNlCiAgICAgKiBAcmV0dXJuIHN0cmluZwogICAgICovCiAgICBwcml2YXRlIGZ1bmN0aW9uIF9hcHBTaWQoKQogICAgewogICAgICAgICR0d2lsaW8gPSBcQXBwOjptYWtlKCdUd2lsaW8nKTsKICAgICAgICAkYXBwU2lkID0gY29uZmlnKCdhcHAudHdpbGlvJylbJ1RXSUxJT19BUFBfU0lEJ107CgogICAgICAgIGlmIChpc3NldCgkYXBwU2lkKSkgewogICAgICAgICAgICByZXR1cm4gJGFwcFNpZDsKICAgICAgICB9CgogICAgICAgICRtYXRjaGluZ0FwcHNJdGVyID0gJHR3aWxpbwogICAgICAgICAgICAtPmFjY291bnQKICAgICAgICAgICAgLT5hcHBsaWNhdGlvbnMKICAgICAgICAgICAgLT5nZXRJdGVyYXRvcigwLCA1MCwgWydGcmllbmRseU5hbWUnID0+ICdDYWxsIHRyYWNraW5nIGFwcCddKTsKCiAgICAgICAgJG1hdGNoaW5nQXBwcyA9IGl0ZXJhdG9yX3RvX2FycmF5KCRtYXRjaGluZ0FwcHNJdGVyKTsKCiAgICAgICAgaWYgKGVtcHR5KCRtYXRjaGluZ0FwcHMpKSB7CiAgICAgICAgICAgIHJldHVybiAkdHdpbGlvLT5hY2NvdW50LT5hcHBsaWNhdGlvbnMtPmNyZWF0ZSgKICAgICAgICAgICAgICAgIFsnZnJpZW5kbHlfbmFtZScgPT4gJ0NhbGwgdHJhY2tpbmcgYXBwJ10KICAgICAgICAgICAgKS0+c2lkOwogICAgICAgIH0gZWxzZSB7CiAgICAgICAgICAgIHJldHVybiAkbWF0Y2hpbmdBcHBzWzBdLT5zaWQ7CiAgICAgICAgfQogICAgfQp9Cg==</textarea>
<textarea class="saurus-file" data-file="app/LeadSource.php" data-mode="php">PD9waHAKCm5hbWVzcGFjZSBBcHA7Cgp1c2UgSWxsdW1pbmF0ZVxEYXRhYmFzZVxFbG9xdWVudFxNb2RlbDsKdXNlIEFwcFxMZWFkOwoKY2xhc3MgTGVhZFNvdXJjZSBleHRlbmRzIE1vZGVsCnsKICAgIHByb3RlY3RlZCAkZmlsbGFibGUgPSBbJ251bWJlcicsICdmb3J3YXJkaW5nX251bWJlcicsICdkZXNjcmlwdGlvbiddOwoKICAgIHB1YmxpYyBmdW5jdGlvbiBsZWFkcygpCiAgICB7CiAgICAgICAgcmV0dXJuICR0aGlzLT5oYXNNYW55KCdBcHBcTGVhZCcpOwogICAgfQp9Cg==</textarea>
<textarea class="saurus-file" data-file="app/Lead.php" data-mode="php">PD9waHAKCm5hbWVzcGFjZSBBcHA7Cgp1c2UgSWxsdW1pbmF0ZVxEYXRhYmFzZVxFbG9xdWVudFxNb2RlbDsKdXNlIEFwcFxMZWFkU291cmNlOwp1c2UgREI7CgpjbGFzcyBMZWFkIGV4dGVuZHMgTW9kZWwKewogICAgcHJvdGVjdGVkICRmaWxsYWJsZSA9IFsnY2FsbGVyX251bWJlcicsICdjaXR5JywgJ3N0YXRlJywgJ2NhbGxlcl9uYW1lJywgJ2NhbGxfc2lkJ107CgogICAgcHVibGljIGZ1bmN0aW9uIGxlYWRTb3VyY2UoKQogICAgewogICAgICAgIHJldHVybiAkdGhpcy0+YmVsb25nc1RvKCdBcHBcTGVhZFNvdXJjZScpOwogICAgfQoKICAgIHB1YmxpYyBzdGF0aWMgZnVuY3Rpb24gYnlMZWFkU291cmNlKCkKICAgIHsKICAgICAgICAkbGVhZHNCeVNvdXJjZQogICAgICAgICAgICA9IERCOjp0YWJsZSgnbGVhZHMnKQogICAgICAgICAgICAtPmpvaW4oJ2xlYWRfc291cmNlcycsICdsZWFkcy5sZWFkX3NvdXJjZV9pZCcsICc9JywgJ2xlYWRfc291cmNlcy5pZCcpCiAgICAgICAgICAgIC0+c2VsZWN0KAogICAgICAgICAgICAgICAgREI6OnJhdygnY291bnQoMSkgYXMgbGVhZF9jb3VudCcpLAogICAgICAgICAgICAgICAgJ2xlYWRfc291cmNlcy5kZXNjcmlwdGlvbicsCiAgICAgICAgICAgICAgICAnbGVhZF9zb3VyY2VzLm51bWJlcicKICAgICAgICAgICAgKQogICAgICAgICAgICAtPmdyb3VwQnkoCiAgICAgICAgICAgICAgICAnbGVhZF9zb3VyY2VfaWQnLAogICAgICAgICAgICAgICAgJ2xlYWRfc291cmNlcy5kZXNjcmlwdGlvbicsCiAgICAgICAgICAgICAgICAnbGVhZF9zb3VyY2VzLm51bWJlcicKICAgICAgICAgICAgKQogICAgICAgICAgICAtPm9yZGVyQnkoJ2xlYWRfY291bnQnLCAnREVTQycpCiAgICAgICAgICAgIC0+b3JkZXJCeSgnbGVhZF9zb3VyY2VzLmRlc2NyaXB0aW9uJywgJ0RFU0MnKQogICAgICAgICAgICAtPmdldCgpOwoKICAgICAgICByZXR1cm4gJGxlYWRzQnlTb3VyY2U7CiAgICB9CgogICAgcHVibGljIHN0YXRpYyBmdW5jdGlvbiBieUNpdHkoKQogICAgewogICAgICAgICRsZWFkc0J5Q2l0eQogICAgICAgICAgICA9IERCOjp0YWJsZSgnbGVhZHMnKQogICAgICAgICAgICAtPmpvaW4oJ2xlYWRfc291cmNlcycsICdsZWFkcy5sZWFkX3NvdXJjZV9pZCcsICc9JywgJ2xlYWRfc291cmNlcy5pZCcpCiAgICAgICAgICAgIC0+c2VsZWN0KERCOjpyYXcoJ2NvdW50KDEpIGFzIGxlYWRfY291bnQnKSwgJ2xlYWRzLmNpdHknKQogICAgICAgICAgICAtPmdyb3VwQnkoJ2xlYWRzLmNpdHknKQogICAgICAgICAgICAtPmdldCgpOwoKICAgICAgICByZXR1cm4gJGxlYWRzQnlDaXR5OwogICAgfQp9Cg==</textarea>
<textarea class="saurus-file" data-file="app/Http/Controllers/LeadController.php" data-mode="php">PD9waHAKCm5hbWVzcGFjZSBBcHBcSHR0cFxDb250cm9sbGVyczsKCnVzZSBJbGx1bWluYXRlXEh0dHBcUmVxdWVzdDsKdXNlIERCOwoKdXNlIEFwcFxIdHRwXFJlcXVlc3RzOwp1c2UgQXBwXEh0dHBcQ29udHJvbGxlcnNcQ29udHJvbGxlcjsKdXNlIEFwcFxMZWFkOwp1c2UgQXBwXExlYWRTb3VyY2U7CgpjbGFzcyBMZWFkQ29udHJvbGxlciBleHRlbmRzIENvbnRyb2xsZXIKewogICAgLyoqCiAgICAgKiBEaXNwbGF5IGEgbGlzdGluZyBvZiBsZWFkcwogICAgICoKICAgICAqIEByZXR1cm4gUmVzcG9uc2UKICAgICAqLwogICAgcHVibGljIGZ1bmN0aW9uIGRhc2hib2FyZChSZXF1ZXN0ICRyZXF1ZXN0KQogICAgewogICAgICAgICRjb250ZXh0ID0gWwogICAgICAgICAgICAnbGVhZFNvdXJjZXMnID0+IExlYWRTb3VyY2U6OmFsbCgpLAogICAgICAgICAgICAnYXBwU2lkJyA9PiAkdGhpcy0+X2FwcFNpZCgpCiAgICAgICAgXTsKCiAgICAgICAgcmV0dXJuIHJlc3BvbnNlKCktPnZpZXcoJ2xlYWRzLmluZGV4JywgJGNvbnRleHQpOwogICAgfQoKICAgIC8qKgogICAgICogU3RvcmUgYSBuZXcgbGVhZCB3aXRoIGl0cyBsZWFkIHNvdXJjZSBhbmQgZm9yd2FyZCB0aGUgY2FsbAogICAgICoKICAgICAqIEBwYXJhbSAgUmVxdWVzdCAgJHJlcXVlc3QKICAgICAqIEByZXR1cm4gUmVzcG9uc2UKICAgICAqLwogICAgcHVibGljIGZ1bmN0aW9uIHN0b3JlKFJlcXVlc3QgJHJlcXVlc3QpCiAgICB7CiAgICAgICAgJGxlYWRTb3VyY2UgPSBMZWFkU291cmNlOjp3aGVyZShbJ251bWJlcicgPT4gJHJlcXVlc3QtPmlucHV0KCdUbycpXSktPmZpcnN0KCk7CiAgICAgICAgJGxlYWQgPSBuZXcgTGVhZCgpOwogICAgICAgICRsZWFkLT5sZWFkU291cmNlKCktPmFzc29jaWF0ZSgkbGVhZFNvdXJjZS0+aWQpOwoKICAgICAgICAkbGVhZC0+Y2l0eSA9ICR0aGlzLT5fbm9ybWFsaXplTmFtZSgkcmVxdWVzdC0+aW5wdXQoJ0Zyb21DaXR5JykpOwogICAgICAgICRsZWFkLT5zdGF0ZSA9ICR0aGlzLT5fbm9ybWFsaXplTmFtZSgkcmVxdWVzdC0+aW5wdXQoJ0Zyb21TdGF0ZScpKTsKCiAgICAgICAgJGxlYWQtPmNhbGxlcl9udW1iZXIgPSAkcmVxdWVzdC0+aW5wdXQoJ0Zyb20nKTsKICAgICAgICAkbGVhZC0+Y2FsbGVyX25hbWUgPSAkcmVxdWVzdC0+aW5wdXQoJ0NhbGxlck5hbWUnKTsKICAgICAgICAkbGVhZC0+Y2FsbF9zaWQgPSAkcmVxdWVzdC0+aW5wdXQoJ0NhbGxTaWQnKTsKCiAgICAgICAgJGxlYWQtPnNhdmUoKTsKCiAgICAgICAgJGZvcndhcmRNZXNzYWdlID0gbmV3IFxTZXJ2aWNlc19Ud2lsaW9fVHdpbWwoKTsKICAgICAgICAkZm9yd2FyZE1lc3NhZ2UtPmRpYWwoJGxlYWRTb3VyY2UtPmZvcndhcmRpbmdfbnVtYmVyKTsKCiAgICAgICAgcmV0dXJuIHJlc3BvbnNlKCRmb3J3YXJkTWVzc2FnZSwgMjAxKS0+aGVhZGVyKCdDb250ZW50LVR5cGUnLCAnYXBwbGljYXRpb24veG1sJyk7CiAgICB9CiAgICAvKioKICAgICAqIERpc3BsYXkgYWxsIGxlYWQgc291cmNlcyBhcyBKU09OLCBncm91cGVkIGJ5IGxlYWQgc291cmNlCiAgICAgKgogICAgICogQHBhcmFtICBSZXF1ZXN0ICAkcmVxdWVzdAogICAgICogQHJldHVybiBSZXNwb25zZQogICAgICovCiAgICBwdWJsaWMgZnVuY3Rpb24gc3VtbWFyeUJ5TGVhZFNvdXJjZSgpCiAgICB7CiAgICAgICAgcmV0dXJuIHJlc3BvbnNlKCktPmpzb24oTGVhZDo6YnlMZWFkU291cmNlKCkpOwogICAgfQoKICAgIC8qKgogICAgICogRGlzcGxheSBhbGwgbGVhZCBzb3VyY2VzIGFzIEpTT04sIGdyb3VwZWQgYnkgY2l0eQogICAgICoKICAgICAqIEBwYXJhbSAgUmVxdWVzdCAgJHJlcXVlc3QKICAgICAqIEByZXR1cm4gUmVzcG9uc2UKICAgICAqLwogICAgcHVibGljIGZ1bmN0aW9uIHN1bW1hcnlCeUNpdHkoKQogICAgewogICAgICAgIHJldHVybiByZXNwb25zZSgpLT5qc29uKExlYWQ6OmJ5Q2l0eSgpKTsKICAgIH0KCiAgICAvKioKICAgICAqIFRoZSBUd2lsaW8gVHdpTUwgQXBwIFNJRCB0byB1c2UKICAgICAqIEByZXR1cm4gc3RyaW5nCiAgICAgKi8KICAgIHByaXZhdGUgZnVuY3Rpb24gX2FwcFNpZCgpCiAgICB7CiAgICAgICAgJHR3aWxpbyA9IFxBcHA6Om1ha2UoJ1R3aWxpbycpOwogICAgICAgICRhcHBTaWQgPSBjb25maWcoJ2FwcC50d2lsaW8nKVsnVFdJTElPX0FQUF9TSUQnXTsKCiAgICAgICAgaWYgKGlzc2V0KCRhcHBTaWQpKSB7CiAgICAgICAgICAgIHJldHVybiAkYXBwU2lkOwogICAgICAgIH0KCiAgICAgICAgJG1hdGNoaW5nQXBwc0l0ZXIgPSAkdHdpbGlvCiAgICAgICAgICAgIC0+YWNjb3VudAogICAgICAgICAgICAtPmFwcGxpY2F0aW9ucwogICAgICAgICAgICAtPmdldEl0ZXJhdG9yKDAsIDUwLCBbJ0ZyaWVuZGx5TmFtZScgPT4gJ0NhbGwgdHJhY2tpbmcgYXBwJ10pOwoKICAgICAgICAkbWF0Y2hpbmdBcHBzID0gaXRlcmF0b3JfdG9fYXJyYXkoJG1hdGNoaW5nQXBwc0l0ZXIpOwoKICAgICAgICBpZiAoZW1wdHkoJG1hdGNoaW5nQXBwcykpIHsKICAgICAgICAgICAgcmV0dXJuICR0d2lsaW8tPmFjY291bnQtPmFwcGxpY2F0aW9ucy0+Y3JlYXRlKAogICAgICAgICAgICAgICAgWydmcmllbmRseV9uYW1lJyA9PiAnQ2FsbCB0cmFja2luZyBhcHAnXQogICAgICAgICAgICApLT5zaWQ7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgcmV0dXJuICRtYXRjaGluZ0FwcHNbMF0tPnNpZDsKICAgICAgICB9CiAgICB9CgogICAgcHJpdmF0ZSBmdW5jdGlvbiBfbm9ybWFsaXplTmFtZSgkdG9Ob3JtYWxpemUpCiAgICB7CiAgICAgICAgaWYgKGlzX251bGwoJHRvTm9ybWFsaXplKSkgewogICAgICAgICAgICByZXR1cm4gJyc7CiAgICAgICAgfSBlbHNlIHsKICAgICAgICAgICAgcmV0dXJuICR0b05vcm1hbGl6ZTsKICAgICAgICB9CiAgICB9Cn0K</textarea>
<textarea class="saurus-file" data-file="public/js/pieCharts.js" data-mode="javascript">CiQuZ2V0SlNPTignL2xlYWQvc3VtbWFyeS1ieS1sZWFkLXNvdXJjZScsIGZ1bmN0aW9uKHJlc3VsdCkgewogICAgc3VtbWFyeUJ5TGVhZFNvdXJjZURhdGEgPSBfLm1hcChyZXN1bHQsIGZ1bmN0aW9uKGxlYWRTb3VyY2VEYXRhUG9pbnQpIHsKICAgICAgICByZXR1cm4gewogICAgICAgICAgICB2YWx1ZTogbGVhZFNvdXJjZURhdGFQb2ludC5sZWFkX2NvdW50LAogICAgICAgICAgICBjb2xvcjogJ2hzbCgnICsgKDE4MCAqIGxlYWRTb3VyY2VEYXRhUG9pbnQubGVhZF9jb3VudC8gcmVzdWx0Lmxlbmd0aCkgKyAnLCAxMDAlLCA1MCUpJywKICAgICAgICAgICAgbGFiZWw6IGxlYWRTb3VyY2VEYXRhUG9pbnQuZGVzY3JpcHRpb24sCiAgICAgICAgfTsKICAgIH0pOwogICAgdmFyIGJ5TGVhZFNvdXJjZUNvbnRleHQgPSAkKCIjcGllLWJ5LWxlYWQtc291cmNlIikuZ2V0KDApLmdldENvbnRleHQoIjJkIik7CiAgICB2YXIgYnlMZWFkU291cmNlQ2hhcnQgPSBuZXcgQ2hhcnQoYnlMZWFkU291cmNlQ29udGV4dCkuUGllKHN1bW1hcnlCeUxlYWRTb3VyY2VEYXRhKTsKfSk7CgokLmdldEpTT04oJy9sZWFkL3N1bW1hcnktYnktY2l0eScsIGZ1bmN0aW9uKHJlc3VsdCkgewogICAgc3VtbWFyeUJ5Q2l0eURhdGEgPSBfLm1hcChyZXN1bHQsIGZ1bmN0aW9uKGNpdHlEYXRhUG9pbnQpIHsKICAgICAgICByZXR1cm4gewogICAgICAgICAgICB2YWx1ZTogY2l0eURhdGFQb2ludC5sZWFkX2NvdW50LAogICAgICAgICAgICBjb2xvcjogJ2hzbCgnICsgKDE4MCAqIGNpdHlEYXRhUG9pbnQubGVhZF9jb3VudC8gcmVzdWx0Lmxlbmd0aCkgKyAnLCAxMDAlLCA1MCUpJywKICAgICAgICAgICAgbGFiZWw6IGNpdHlEYXRhUG9pbnQuY2l0eQogICAgICAgIH07CiAgICB9KTsKICAgIHZhciBieUNpdHlDb250ZXh0ID0gJCgiI3BpZS1ieS1jaXR5IikuZ2V0KDApLmdldENvbnRleHQoIjJkIik7CiAgICB2YXIgYnlDaXR5Q2hhcnQgPSBuZXcgQ2hhcnQoYnlDaXR5Q29udGV4dCkuUGllKHN1bW1hcnlCeUNpdHlEYXRhKTsKfSk7Cg==</textarea>
</div>
</div><div class="saurus-overview"><ul></ul></div></div><div class="saurus-code"><div class="file-path"><span class="crumb-container"></span><i class="fa fa-fw fa-folder"></i></div><div class="saurus-editor"></div></div><div class="saurus-explorer"><div class="saurus-file-list"></div><a href="https://github.com/TwilioDevEd/call-tracking-laravel" target="_blank" class="explorer-get-code"> <i class="fa fa-lg fa-github-square"> </i>View Code on GitHub</a></div></div></div></div><script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script><script src="//cdnjs.cloudflare.com/ajax/libs/underscore.js/1.8.3/underscore-min.js"></script><script src="//cdnjs.cloudflare.com/ajax/libs/backbone.js/1.1.2/backbone-min.js"></script><script src="ace/ace.js"></script><script src="ace/theme-monokai.js"></script><script src="viewsaurus.js"></script></body></html>